<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-jeu Radiologie ‚Äî ES</title>
  <style>
    :root {
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#6ee7b7;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.04);
      --success:#10b981;
      --danger:#ef4444;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    * { box-sizing: border-box; }
    html, body { height:100%; margin:0; background: var(--bg); color:#e6eef8; }
    .app { min-height:100vh; display:flex; align-items:center; justify-content:center; padding:32px; }
    .container {
      width:100%; max-width:1100px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px; box-shadow:0 8px 30px rgba(2,6,23,0.6);
      overflow:hidden;
      display:grid;
      grid-template-columns:260px 1fr 360px;
    }
    .left {
      padding:24px;
      border-right:1px solid rgba(255,255,255,0.03);
      display:flex; flex-direction:column; gap:16px;
      background:linear-gradient(90deg, rgba(255,255,255,0.01), transparent);
    }
    .left h2 { margin:0; font-size:18px; color:var(--accent); }
    .btn {
      background:var(--glass);
      border:1px solid rgba(255,255,255,0.04);
      padding:12px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      color:var(--accent);
      display:flex; align-items:center; gap:8px;
      transition: transform .13s ease, background .18s;
    }
    .btn:hover { transform: translateY(-4px); }
    .btn:active { transform: translateY(-1px); }
    .btn.locked { opacity:.45; cursor:not-allowed; transform:none; }

    .center {
      display:flex; align-items:center; justify-content:center;
      position:relative; padding:24px;
    }
    .stage {
      width:420px; height:420px;
      background:linear-gradient(180deg,#081728 0%, #041225 100%);
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.03);
      display:grid; place-items:center;
      position:relative; overflow:hidden;
    }

    /* Tube + animation patient dans le tube */
    .tube {
      position:absolute;
      width:260px; height:260px;
      border:12px solid rgba(110,231,183,0.3);
      border-radius:130px / 40px;
      top:50%; left:50%;
      transform: translate(-50%,-50%) scaleY(0.2) scaleX(0.8);
      opacity:0;
      transition: opacity .5s ease;
    }
    .tube.open {
      animation: tubeOpenAnim 0.8s ease forwards;
    }
    @keyframes tubeOpenAnim {
      0% { transform: translate(-50%,-50%) scaleY(0.2) scaleX(0.8); opacity:0; }
      50% { transform: translate(-50%,-50%) scaleY(1) scaleX(1); opacity:0.7; }
      100% { transform: translate(-50%,-50%) scaleY(1) scaleX(1); opacity:1; }
    }
    .tube.close {
      animation: tubeCloseAnim 0.6s ease forwards;
    }
    @keyframes tubeCloseAnim {
      0% { opacity:1; }
      100% { transform: translate(-50%,-50%) scaleY(0) scaleX(0.8); opacity:0; }
    }

    .patient {
      width:140px; height:240px;
      display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
      gap:6px; transform-origin:center;
      transition: transform .6s ease, opacity .6s ease;
    }
    .head {
      width:60px; height:60px; border-radius:50%; background:#ffe6d6;
      border:4px solid rgba(0,0,0,0.12);
      display:flex; align-items:center; justify-content:center;
    }
    .eye {
      width:8px; height:8px; background:#4b5563; border-radius:50%; margin:0 6px;
    }
    .body {
      width:80px; height:120px;
      background:linear-gradient(180deg,#ffe6d6,#ffd9c0);
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      position:relative;
    }

    /* m√©decins vus du dessus */
    .doctor {
      position:absolute;
      width:50px; height:90px;
      background:#fff;
      border-radius:8px;
      opacity:0;
      display:flex; align-items:center; justify-content:center;
      font-size:10px; color:#333;
      transform-origin:center;
    }
    .doctor:nth-child(1) { left:12%; top:28%; transform: scale(0.7); }
    .doctor:nth-child(2) { right:12%; top:28%; transform: scale(0.7); }
    .doctor:nth-child(3) { left:22%; bottom:20%; transform: scale(0.7); }
    .doctor:nth-child(4) { right:22%; bottom:20%; transform: scale(0.7); }

    .doctor.animate {
      animation: docAnim 1.4s ease forwards;
    }
    @keyframes docAnim {
      0% { opacity:0; transform: translateY(-30px) scale(0.5); }
      20% { opacity:1; transform: translateY(0px) scale(1); }
      80% { opacity:1; transform: translateY(0px) scale(1); }
      100% { opacity:0; transform: translateY(-30px) scale(0.5); }
    }

    @keyframes patientShake {
      0% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
      100% { transform: translateY(0); }
    }

    .right {
      padding:24px;
      border-left:1px solid rgba(255,255,255,0.03);
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.01));
    }
    .right h3 { margin-top:4px; color:var(--accent); }
    .info {
      background:rgba(255,255,255,0.02);
      padding:14px; border-radius:10px; min-height:140px;
    }

    .overlay {
      position:fixed; inset:0;
      display:grid; place-items:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.75));
      z-index:80;
    }
    .modal {
      background:linear-gradient(180deg,#071226,#061126);
      padding:26px; border-radius:12px;
      max-width:720px; border:1px solid rgba(255,255,255,0.04);
      text-align:center;
    }
    .modal h1 { margin:0 0 6px 0; font-size:22px; color:var(--accent); }
    .modal p { color:var(--muted); margin:8px 0 16px; }
    .primary {
      background:linear-gradient(90deg, var(--accent), #9be6d1);
      color:#052018; padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700;
    }
    .secondary {
      background:transparent; border:1px solid rgba(255,255,255,0.06);
      padding:8px 12px; border-radius:8px; color:var(--muted); cursor:pointer;
    }

    @media (max-width:980px){
      .container { grid-template-columns:1fr; grid-template-rows:auto auto auto; }
      .left, .right { order:2; }
      .center { order:1; padding:12px; }
      .stage { width:320px; height:320px; }
      .right { padding:18px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="container" id="mainApp" aria-hidden="true">
      <div class="left">
        <h2>Actions</h2>
        <button class="btn" id="btn1" data-action="curative">1. Appliquer une m√©thode curative</button>
        <button class="btn" id="btn2" data-action="preventive">2. Appliquer une m√©thode pr√©ventive</button>
        <button class="btn" id="btn3" data-action="irm">3. Faire un IRM</button>
        <div style="flex:1"></div>
        <small style="color:var(--muted)">Utilisez les boutons pour tester les m√©thodes ‚Äî observez les animations et l‚Äôexplication √† droite.</small>
      </div>

      <div class="center">
        <div class="stage" role="main" aria-label="Sc√®ne d'op√©ration">
          <div class="tube" id="tube" aria-hidden="true"></div>
          <div class="patient" id="patient" aria-hidden="false">
            <div class="head"><div style="display:flex;align-items:center;justify-content:center"><div class="eye"></div><div class="eye"></div></div></div>
            <div class="body"><div style="text-align:center;color:#0b1720;font-weight:700">Patient</div></div>
          </div>
          <div class="doctor" id="doc1">Dr.</div>
          <div class="doctor" id="doc2">Dr.</div>
          <div class="doctor" id="doc3">Dr.</div>
          <div class="doctor" id="doc4">Dr.</div>
        </div>
      </div>

      <div class="right">
        <h3>Informations</h3>
        <div class="info" id="info">
          <p>Soyez m√©decin. Choisissez une m√©thode √† gauche pour l‚Äôappliquer au patient. Les animations illustrent l‚Äôeffet.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="overlay" id="intro">
    <div class="modal">
      <h1>Bienvenue</h1>
      <p>Vous √™tes m√©decin. √âtudiez la radiologie pour soigner le patient. Testez les 3 m√©thodes (curative, pr√©ventive, IRM).</p>
      <div style="display:flex; gap:12px; justify-content:center; margin-top:12px;">
        <button class="primary" id="start">Commencer</button>
        <button class="secondary" id="explain">√Ä quoi √ßa sert ?</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="finish" style="display:none; z-index:90;">
    <div class="modal">
      <h1>Patient sauv√© ! üéâ</h1>
      <p>Gr√¢ce √† vos interventions, le patient est en s√©curit√©. Voulez-vous recommencer ?</p>
      <div style="display:flex; gap:12px; justify-content:center; margin-top:12px;">
        <button class="primary" id="restart">Recommencer</button>
      </div>
    </div>
  </div>

  <script>
    const intro = document.getElementById('intro');
    const mainApp = document.getElementById('mainApp');
    const btn1 = document.getElementById('btn1');
    const btn2 = document.getElementById('btn2');
    const btn3 = document.getElementById('btn3');
    const info = document.getElementById('info');
    const patient = document.getElementById('patient');
    const tube = document.getElementById('tube');
    const docs = [document.getElementById('doc1'), document.getElementById('doc2'),
                  document.getElementById('doc3'), document.getElementById('doc4')];
    const finish = document.getElementById('finish');

    const texts = {
      curative: `<h4>M√©thode curative</h4>
                 <p>La m√©thode curative consiste √† intervenir directement pour soigner une l√©sion ou retirer une anomalie. En radiologie interventionnelle, on guide un instrument gr√¢ce √† l‚Äôimagerie pour traiter la zone malade.</p>
                 <ul><li>Objectif : gu√©rir ou retirer un probl√®me existant.</li><li>Exemples : drainage, ablation, embolisation.</li></ul>`,
      preventive: `<h4>M√©thode pr√©ventive</h4>
                  <p>Les m√©thodes pr√©ventives visent √† r√©duire le risque de complications et √† am√©liorer la sant√© avant qu‚Äôun probl√®me grave n‚Äôapparaisse. En radiologie, cela peut inclure le d√©pistage, la surveillance ou des recommandations d‚Äôhygi√®ne.</p>
                  <ul><li>Objectif : prot√©ger et r√©duire les risques.</li><li>Exemples : d√©pistage, suivi r√©gulier, mesures d‚Äôhygi√®ne.</li></ul>`,
      irm: `<h4>IRM (Imagerie par R√©sonance Magn√©tique)</h4>
            <p>L‚ÄôIRM est une technique d‚Äôimagerie non invasive qui utilise des champs magn√©tiques et des ondes radio pour obtenir des images d√©taill√©es des organes et tissus. Tr√®s utile pour diagnostiquer des anomalies internes et guider le choix th√©rapeutique.</p>
            <ul><li>Objectif : diagnostiquer et localiser une anomalie.</li><li>Exemples : imagerie c√©r√©brale, examen musculo-squelettique, d√©tection de tumeurs.</li></ul>`
    };

    const used = new Set();

    function play(action) {
      if (!['curative','preventive','irm'].includes(action)) return;

      if (action === 'curative') {
        info.innerHTML = texts.curative;
        playCurative();
      }
      if (action === 'preventive') {
        info.innerHTML = texts.preventive;
        playPreventive();
      }
      if (action === 'irm') {
        info.innerHTML = texts.irm;
        playIrm();
      }

      used.add(action);
      checkIfFinished();
    }

    function playCurative(){
      // m√©decins apparaissent
      docs.forEach(doc => {
        doc.classList.remove('animate');
        void doc.offsetWidth;
        doc.classList.add('animate');
      });
      // patient l√©ger tremblement
      patient.style.animation = 'patientShake .8s ease';
      patient.addEventListener('animationend', ()=>{ patient.style.animation = ''; }, { once:true });
    }

    function playPreventive(){
      docs.forEach(doc => {
        doc.classList.remove('animate');
        void doc.offsetWidth;
        doc.classList.add('animate');
      });
      patient.style.animation = 'patientShake .8s ease';
      patient.addEventListener('animationend', ()=>{ patient.style.animation = ''; }, { once:true });
    }

    function playIrm(){
      // tube ouvre
      tube.classList.remove('close');
      void tube.offsetWidth;
      tube.classList.add('open');

      // patient ‚Äúentre‚Äù dans le tube
      patient.style.transform = 'translateY(60px) scale(0.5)';
      patient.style.opacity = '0.4';

      setTimeout(() => {
        // tube se ferme / dispara√Æt
        tube.classList.remove('open');
        tube.classList.add('close');
        // patient revient normal
        patient.style.transform = '';
        patient.style.opacity = '';
      }, 1200);
    }

    function checkIfFinished(){
      if (used.size >= 3) {
        setTimeout(()=>{ finish.style.display='grid'; }, 1000);
      }
    }

    btn1.addEventListener('click', ()=>play('curative'));
    btn2.addEventListener('click', ()=>play('preventive'));
    btn3.addEventListener('click', ()=>play('irm'));

    document.getElementById('start').addEventListener('click', ()=>{
      intro.style.display='none';
      mainApp.setAttribute('aria-hidden','false');
    });
    document.getElementById('explain').addEventListener('click', ()=>{
      alert('Ce mini-jeu illustre comment la radiologie peut aider : le diagnostic (IRM), la pr√©vention, et l‚Äôintervention (m√©thodes curatives). Utilisez les trois boutons pour voir les animations et lire les explications.');
    });
    document.getElementById('restart').addEventListener('click', ()=>{
      used.clear();
      finish.style.display='none';
      info.innerHTML = `<p>Testez √† nouveau les 3 m√©thodes.</p>`;
    });

    [btn1,btn2,btn3].forEach(b => {
      b.addEventListener('keydown', e=>{ if (e.key==='Enter' || e.key===' ') b.click(); });
    });

  </script>
</body>
</html>
