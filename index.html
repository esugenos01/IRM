<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-jeu Radiologie ‚Äî Enseignement Scientifique</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#6ee7b7; --muted:#94a3b8; --glass: rgba(255,255,255,0.04);
      --success:#10b981; --danger:#ef4444;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071126 0%, #07172a 100%);color:#e6eef8}
    .app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}
    .container{width:100%;max-width:1100px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6);overflow:hidden;display:grid;grid-template-columns:260px 1fr 360px}

    /* LEFT: controls */
    .left{padding:24px;border-right:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;gap:16px;background:linear-gradient(90deg, rgba(255,255,255,0.01), transparent)}
    .left h2{margin:0;font-size:18px;color:var(--accent)}
    .btn{background:var(--glass);border:1px solid rgba(255,255,255,0.04);padding:12px 14px;border-radius:10px;cursor:pointer;font-weight:600;color:var(--accent);display:flex;gap:10px;align-items:center;transition:transform .13s ease, background .18s}
    .btn:hover{transform:translateY(-4px)}
    .btn:active{transform:translateY(-1px)}
    .btn.locked{opacity:.45;cursor:not-allowed;transform:none}

    /* CENTER: character */
    .center{display:flex;align-items:center;justify-content:center;position:relative;padding:24px}
    .stage{width:420px;height:420px;background:linear-gradient(180deg,#081728 0%, #041225 100%);border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:grid;place-items:center;position:relative;overflow:hidden}
    .patient{width:160px;height:260px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:6px;transform-origin:center}
    .head{width:70px;height:70px;border-radius:50%;background:#ffe6d6;border:4px solid rgba(0,0,0,0.12);display:flex;align-items:center;justify-content:center}
    .eye{width:8px;height:8px;background:#4b5563;border-radius:50%;margin:0 8px}
    .body{width:90px;height:140px;background:linear-gradient(180deg,#ffe6d6,#ffd9c0);border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative}
    .heartbeat{position:absolute;top:-14px;right:-10px;font-size:12px;color:var(--muted)}

    /* right: info panel */
    .right{padding:24px;border-left:1px solid rgba(255,255,255,0.03);background:linear-gradient(90deg, transparent, rgba(255,255,255,0.01));}
    .right h3{margin-top:4px;color:var(--accent)}
    .info{background:rgba(255,255,255,0.02);padding:14px;border-radius:10px;min-height:120px}

    /* animations */
    .scalpel{position:absolute;width:120px;height:12px;right:20%;top:20%;transform-origin:left center;opacity:0}
    .scalpel .blade{height:100%;border-radius:6px;background:linear-gradient(90deg,#cbd5e1,#e2e8f0);box-shadow:0 4px 12px rgba(0,0,0,0.5)}

    .shield{position:absolute;left:8%;bottom:22%;width:140px;height:180px;opacity:0;transform-origin:center}
    .shield .shape{width:100%;height:100%;border-radius:18px;background:linear-gradient(180deg,#0ea5a0 0%, #7dd3fc 100%);opacity:.11;display:flex;align-items:center;justify-content:center;font-weight:700}

    .scanner{position:absolute;right:6%;top:12%;width:160px;height:160px;border-radius:12px;opacity:0;display:flex;align-items:center;justify-content:center}
    .beam{position:absolute;left:50%;transform:translateX(-50%);width:40px;height:220px;background:linear-gradient(180deg, rgba(167,139,250,0.18), rgba(79,70,229,0.14));top:60px;border-radius:8px;opacity:0}

    /* keyframes */
    @keyframes cutAnim{0%{opacity:0; transform:translateX(-30px) rotate(-30deg)}30%{opacity:1;transform:translateX(20px) rotate(10deg)}60%{transform:translateX(-10px) rotate(-15deg)}100%{opacity:0;transform:translateX(80px) rotate(20deg)}}
    @keyframes shieldPulse{0%{opacity:0;transform:scale(.6)}40%{opacity:.16;transform:scale(1.03)}100%{opacity:0;transform:scale(1.2)}}
    @keyframes scannerSpin{0%{opacity:0;transform:rotate(0) scale(.9)}20%{opacity:.9}100%{opacity:0;transform:rotate(360deg) scale(1.05)}}
    @keyframes patientReact{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}

    .play-cut{animation:cutAnim .95s ease forwards}
    .play-shield{animation:shieldPulse 1.2s ease forwards}
    .play-scan{animation:scannerSpin 1.1s ease forwards}
    .patient.bounce{animation:patientReact .8s ease}

    /* overlay modals */
    .overlay{position:fixed;inset:0;display:grid;place-items:center;background:linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.75));z-index:80}
    .modal{background:linear-gradient(180deg,#071226,#061126);padding:26px;border-radius:12px;max-width:720px;border:1px solid rgba(255,255,255,0.04);text-align:center}
    .modal h1{margin:0 0 6px 0;font-size:20px;color:var(--accent)}
    .modal p{color:var(--muted);margin:8px 0 16px}
    .primary{background:linear-gradient(90deg,var(--accent), #9be6d1);color:#052018;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:var(--muted);cursor:pointer}

    /* small screens */
    @media (max-width:980px){.container{grid-template-columns:1fr;grid-template-rows:auto auto auto}.left,.right{order:2}.center{order:1;padding:12px}.stage{width:320px;height:320px}.right{padding:18px}}
  </style>
</head>
<body>
  <div class="app">
    <div class="container" id="mainApp" aria-hidden="true">
      <div class="left">
        <h2>Actions</h2>
        <button class="btn" id="btn1" data-action="curative">1. Appliquer une m√©thode curative</button>
        <button class="btn" id="btn2" data-action="preventive">2. Appliquer une m√©thode pr√©ventive</button>
        <button class="btn" id="btn3" data-action="irm">3. Faire un IRM</button>
        <div style="flex:1"></div>
        <small style="color:var(--muted)">Utilisez les boutons pour tester des m√©thodes ‚Äî observez les animations et l'explication √† droite.</small>
      </div>

      <div class="center">
        <div class="stage" role="main" aria-label="Sc√®ne d'op√©ration">
          <div class="patient" id="patient" aria-hidden="false">
            <div class="head" id="head">
              <div style="display:flex;align-items:center;justify-content:center">
                <div class="eye"></div>
                <div class="eye"></div>
              </div>
            </div>
            <div class="body" id="torso">
              <div style="text-align:center;color:#0b1720;font-weight:700">Patient</div>
            </div>
          </div>

          <!-- scalpel -->
          <div class="scalpel" id="scalpel" aria-hidden="true">
            <div class="blade"></div>
          </div>

          <!-- shield (preventive) -->
          <div class="shield" id="shield" aria-hidden="true">
            <div class="shape">Pr√©vention</div>
          </div>

          <!-- scanner (IRM) -->
          <div class="scanner" id="scanner" aria-hidden="true">
            <div style="width:120px;height:28px;border-radius:6px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;">IRM</div>
          </div>

          <div class="beam" id="beam"></div>
        </div>
      </div>

      <div class="right">
        <h3>Informations</h3>
        <div class="info" id="info">
          <p>Soyez m√©decin. Choisissez une m√©thode √† gauche pour l'appliquer au patient. Les animations illustrent l'effet.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay d'intro -->
  <div class="overlay" id="intro">
    <div class="modal">
      <h1>Bienvenue</h1>
      <p>Vous √™tes m√©decin. √âtudiez la radiologie pour soigner le patient. Testez les 3 m√©thodes (curative, pr√©ventive, IRM).</p>
      <div style="display:flex;gap:12px;justify-content:center;margin-top:12px">
        <button class="primary" id="start">Commencer</button>
        <button class="secondary" id="explain">√Ä quoi √ßa sert ?</button>
      </div>
    </div>
  </div>

  <!-- Overlay de fin -->
  <div class="overlay" id="finish" style="display:none;z-index:90">
    <div class="modal">
      <h1>Patient sauv√© ! üéâ</h1>
      <p>Gr√¢ce √† vos interventions, le patient est en s√©curit√©. Voulez-vous recommencer ?</p>
      <div style="display:flex;gap:12px;justify-content:center;margin-top:12px">
        <button class="primary" id="restart">Recommencer</button>
      </div>
    </div>
  </div>

  <script>
    // √âl√©ments
    const intro = document.getElementById('intro');
    const mainApp = document.getElementById('mainApp');
    const btn1 = document.getElementById('btn1');
    const btn2 = document.getElementById('btn2');
    const btn3 = document.getElementById('btn3');
    const info = document.getElementById('info');
    const patient = document.getElementById('patient');
    const scalpel = document.getElementById('scalpel');
    const shield = document.getElementById('shield');
    const scanner = document.getElementById('scanner');
    const beam = document.getElementById('beam');
    const finish = document.getElementById('finish');

    // Etat pour v√©rifier si on a utilis√© les 3 m√©thodes
    const used = new Set();

    // Explications (texte p√©dagogique, en fran√ßais)
    const texts = {
      curative: `<h4>M√©thode curative</h4>
                <p>La m√©thode curative consiste √† intervenir directement pour soigner une l√©sion ou enlever une anomalie. En radiologie, cela peut √™tre guid√© par l'imagerie (ex: radiologie interventionnelle) : un instrument est plac√© pr√©cis√©ment √† l'aide d'images pour traiter la zone malade.</p>
                <ul><li>Objectif : gu√©rir ou retirer un probl√®me existant.</li><li>Exemples : drainage, ablation, embolisation.</li></ul>`,
      preventive: `<h4>M√©thode pr√©ventive</h4>
                <p>Les m√©thodes pr√©ventives visent √† r√©duire le risque de complications et √† am√©liorer la sant√© avant qu'un probl√®me grave n'apparaisse. En radiologie, cela inclut des proc√©dures et recommandations pour limiter les risques, comme la vaccination, l'hygi√®ne, ou la surveillance par imagerie.</p>
                <ul><li>Objectif : prot√©ger et r√©duire les risques.</li><li>Exemples : d√©pistage, suivi r√©gulier, mesures d'hygi√®ne.</li></ul>`,
      irm: `<h4>IRM (Imagerie par R√©sonance Magn√©tique)</h4>
                <p>L'IRM est une technique d'imagerie non invasive qui utilise des champs magn√©tiques et des ondes radio pour obtenir des images d√©taill√©es des organes et tissus. Elle est tr√®s utile pour diagnostiquer des anomalies internes et guider le choix th√©rapeutique.</p>
                <ul><li>Objectif : diagnostiquer et localiser une anomalie.</li><li>Exemples : imagerie c√©r√©brale, examens musculo-squelettiques, d√©tection de tumeurs.</li></ul>`
    };

    // Helper pour jouer animation + texte
    function play(action){
      // Emp√™che spam
      if(!['curative','preventive','irm'].includes(action)) return;

      // Show explanation
      if(action === 'curative'){ info.innerHTML = texts.curative; playCurative(); }
      if(action === 'preventive'){ info.innerHTML = texts.preventive; playPreventive(); }
      if(action === 'irm'){ info.innerHTML = texts.irm; playIrm(); }

      used.add(action);
      checkIfFinished();
    }

    function playCurative(){
      // animation scalpel + patient reaction
      scalpel.classList.remove('play-cut'); shield.classList.remove('play-shield'); scanner.classList.remove('play-scan');
      scalpel.style.opacity=1; scalpel.classList.add('play-cut');
      patient.classList.add('bounce');
      setTimeout(()=>{patient.classList.remove('bounce'); scalpel.style.opacity=0;},1000);
    }
    function playPreventive(){
      scalpel.classList.remove('play-cut'); shield.classList.remove('play-shield'); scanner.classList.remove('play-scan');
      shield.style.opacity=1; shield.classList.add('play-shield');
      patient.classList.add('bounce');
      setTimeout(()=>{patient.classList.remove('bounce'); shield.style.opacity=0;},1200);
    }
    function playIrm(){
      scalpel.classList.remove('play-cut'); shield.classList.remove('play-shield'); scanner.classList.remove('play-scan');
      beam.style.opacity=0.7; scanner.style.opacity=1; scanner.classList.add('play-scan');
      patient.classList.add('bounce');
      setTimeout(()=>{patient.classList.remove('bounce'); scanner.style.opacity=0; beam.style.opacity=0;},1100);
    }

    function checkIfFinished(){
      if(used.size >= 3){
        // d√©lai court pour laisser l'utilisateur lire
        setTimeout(()=>{finish.style.display='grid';},700);
      }
    }

    // Event listeners
    btn1.addEventListener('click', ()=> play('curative'));
    btn2.addEventListener('click', ()=> play('preventive'));
    btn3.addEventListener('click', ()=> play('irm'));

    document.getElementById('start').addEventListener('click', ()=>{
      intro.style.display='none';
      mainApp.setAttribute('aria-hidden','false');
    });

    document.getElementById('explain').addEventListener('click', ()=>{
      alert('Ce mini-jeu illustre comment la radiologie peut aider au diagnostic (IRM), √† la pr√©vention et √† l\'intervention (m√©thodes curatives). Utilisez les trois boutons pour voir les animations et lire les explications.');
    });

    document.getElementById('restart').addEventListener('click', ()=>{
      // reset
      used.clear();
      finish.style.display='none';
      info.innerHTML = '<p>Testez √† nouveau les 3 m√©thodes.</p>';
    });

    // Accessibilit√© clavier
    [btn1,btn2,btn3].forEach(b=>b.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' ') b.click(); }))

    // Small polish: place scalpel visually near patient
    // We'll compute a nice position relative to stage
    function positionTools(){
      const stage = document.querySelector('.stage');
      const rect = stage.getBoundingClientRect();
      // scalpel to the right of patient
      scalpel.style.left = (rect.width*0.56)+'px';
      scalpel.style.top = (rect.height*0.18)+'px';
      // shield left bottom
      shield.style.left = (rect.width*0.08)+'px';
      shield.style.top = (rect.height*0.38)+'px';
      // scanner right top
      scanner.style.left = (rect.width*0.62)+'px';
      scanner.style.top = (rect.height*0.08)+'px';
      // beam centering
      beam.style.left = (rect.width*0.53)+'px';
      beam.style.top = (rect.height*0.22)+'px';
    }
    window.addEventListener('resize', positionTools);
    window.addEventListener('load', positionTools);
  </script>
</body>
</html>
